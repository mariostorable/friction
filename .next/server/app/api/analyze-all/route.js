"use strict";(()=>{var e={};e.id=711,e.ids=[711],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{e.exports=require("buffer")},54838:(e,t,a)=>{a.r(t),a.d(t,{headerHooks:()=>g,originalPathname:()=>m,patchFetch:()=>j,requestAsyncStorage:()=>y,routeModule:()=>d,serverHooks:()=>h,staticGenerationAsyncStorage:()=>f,staticGenerationBailout:()=>x});var n={};a.r(n),a.d(n,{POST:()=>p,maxDuration:()=>u});var r=a(95419),o=a(69108),i=a(99678),s=a(78070),l=a(57699),c=a(7439);let u=300;async function p(e){try{let t=(0,l.createRouteHandlerClient)({cookies:c.cookies}),{data:{user:a}}=await t.auth.getUser();if(!a)return s.Z.json({error:"Not authenticated"},{status:401});let{portfolioType:n,accountId:r}=await e.json();if(r)try{return await fetch(`${e.nextUrl.origin}/api/salesforce/sync-cases`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accountId:r})}),await fetch(`${e.nextUrl.origin}/api/analyze-friction`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accountId:r})}),await fetch(`${e.nextUrl.origin}/api/calculate-ofi`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accountId:r})}),s.Z.json({success:!0,analyzed:1})}catch(e){return s.Z.json({error:"Failed to analyze account"},{status:500})}let{data:o}=await t.from("portfolios").select("account_ids").eq("user_id",a.id).eq("portfolio_type",n||"top_25").single();if(!o||!o.account_ids)return s.Z.json({error:"Portfolio not found"},{status:404});let i=o.account_ids.slice(0,5);return s.Z.json({success:!0,total:i.length,message:`Started analyzing ${i.length} accounts`})}catch(e){return s.Z.json({error:"Batch analysis failed",details:e instanceof Error?e.message:"Unknown"},{status:500})}}let d=new r.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/analyze-all/route",pathname:"/api/analyze-all",filename:"route",bundlePath:"app/api/analyze-all/route"},resolvedPagePath:"/Users/mario/friction-intelligence/app/api/analyze-all/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:y,staticGenerationAsyncStorage:f,serverHooks:h,headerHooks:g,staticGenerationBailout:x}=d,m="/api/analyze-all/route";function j(){return(0,i.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:f})}}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),n=t.X(0,[456,552,421],()=>a(54838));module.exports=n})();