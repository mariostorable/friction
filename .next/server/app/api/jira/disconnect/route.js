"use strict";(()=>{var e={};e.id=307,e.ids=[307],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{e.exports=require("buffer")},28235:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>h,originalPathname:()=>x,patchFetch:()=>q,requestAsyncStorage:()=>g,routeModule:()=>p,serverHooks:()=>m,staticGenerationAsyncStorage:()=>f,staticGenerationBailout:()=>j});var i={};r.r(i),r.d(i,{POST:()=>l});var n=r(95419),s=r(69108),o=r(99678),a=r(78070),c=r(57699),u=r(23950),d=r(7439);async function l(e){try{let e=(0,c.createRouteHandlerClient)({cookies:d.cookies}),{data:{user:t}}=await e.auth.getUser();if(!t)return a.Z.json({error:"Not authenticated"},{status:401});let{data:r}=await e.from("integrations").select("id").eq("user_id",t.id).eq("integration_type","jira").single();if(!r)return a.Z.json({error:"No Jira integration found"},{status:404});let i=(0,u.eI)("https://skoknvludvonitgekwno.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY,{auth:{autoRefreshToken:!1,persistSession:!1}});return await i.from("oauth_tokens").delete().eq("integration_id",r.id),await e.from("theme_jira_links").delete().eq("user_id",t.id),await e.from("jira_issues").delete().eq("user_id",t.id).eq("integration_id",r.id),await e.from("integrations").delete().eq("id",r.id),console.log("Jira integration disconnected successfully"),a.Z.json({success:!0,message:"Jira disconnected successfully"})}catch(e){return console.error("Jira disconnect error:",e),a.Z.json({error:"Failed to disconnect Jira",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}let p=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/jira/disconnect/route",pathname:"/api/jira/disconnect",filename:"route",bundlePath:"app/api/jira/disconnect/route"},resolvedPagePath:"/Users/mario/friction-intelligence/app/api/jira/disconnect/route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:g,staticGenerationAsyncStorage:f,serverHooks:m,headerHooks:h,staticGenerationBailout:j}=p,x="/api/jira/disconnect/route";function q(){return(0,o.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:f})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[456,552,421],()=>r(28235));module.exports=i})();