"use strict";(()=>{var e={};e.id=939,e.ids=[939],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{e.exports=require("buffer")},18688:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>j,originalPathname:()=>k,patchFetch:()=>y,requestAsyncStorage:()=>l,routeModule:()=>d,serverHooks:()=>h,staticGenerationAsyncStorage:()=>p,staticGenerationBailout:()=>_});var s={};r.r(s),r.d(s,{GET:()=>m});var i=r(95419),a=r(69108),n=r(99678),o=r(78070),u=r(57699),c=r(7439);async function m(e){try{let t=(0,u.createRouteHandlerClient)({cookies:c.cookies}),{data:{user:r}}=await t.auth.getUser();if(!r)return o.Z.json({error:"Not authenticated"},{status:401});let s=e.nextUrl.searchParams.get("theme");if(!s)return o.Z.json({error:"Theme key required"},{status:400});let{data:i}=await t.from("theme_jira_links").select(`
        theme_key,
        match_confidence,
        jira_issues!inner(
          jira_key,
          summary,
          status,
          priority,
          issue_url
        )
      `).eq("theme_key",s).eq("jira_issues.user_id",r.id).order("match_confidence",{ascending:!1}),a=i?.map(e=>({jira_key:e.jira_issues.jira_key,summary:e.jira_issues.summary,status:e.jira_issues.status,priority:e.jira_issues.priority,issue_url:e.jira_issues.issue_url,match_confidence:e.match_confidence}))||[];return o.Z.json({tickets:a})}catch(e){return console.error("Error fetching theme tickets:",e),o.Z.json({error:"Failed to fetch theme tickets",details:e instanceof Error?e.message:"Unknown"},{status:500})}}let d=new i.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/jira/theme-tickets/route",pathname:"/api/jira/theme-tickets",filename:"route",bundlePath:"app/api/jira/theme-tickets/route"},resolvedPagePath:"/Users/mario/friction-intelligence/app/api/jira/theme-tickets/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:l,staticGenerationAsyncStorage:p,serverHooks:h,headerHooks:j,staticGenerationBailout:_}=d,k="/api/jira/theme-tickets/route";function y(){return(0,n.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:p})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[456,552,421],()=>r(18688));module.exports=s})();