"use strict";(()=>{var e={};e.id=315,e.ids=[315],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{e.exports=require("buffer")},82322:(e,t,s)=>{s.r(t),s.d(t,{headerHooks:()=>m,originalPathname:()=>f,patchFetch:()=>x,requestAsyncStorage:()=>p,routeModule:()=>l,serverHooks:()=>h,staticGenerationAsyncStorage:()=>g,staticGenerationBailout:()=>_});var r={};s.r(r),s.d(r,{GET:()=>d});var i=s(95419),a=s(69108),o=s(99678),n=s(78070),u=s(57699),c=s(7439);async function d(e,{params:t}){try{let e=(0,u.createRouteHandlerClient)({cookies:c.cookies}),{data:{user:s}}=await e.auth.getUser();if(!s)return n.Z.json({error:"Not authenticated"},{status:401});let r=t.id,{data:i}=await e.from("friction_cards").select("id, theme_key, severity, created_at").eq("account_id",r).eq("user_id",s.id);if(!i||0===i.length)return n.Z.json({total_issues:0,fixed:0,in_progress:0,open:0,fix_rate_30d:0});let a=i.length,o=Array.from(new Set(i.map(e=>e.theme_key))),{data:d}=await e.from("theme_jira_links").select(`
        theme_key,
        jira_issues!inner(
          status,
          resolution_date
        )
      `).in("theme_key",o).eq("jira_issues.user_id",s.id),l=0,p=0,g=0,h=new Date(Date.now()-2592e6),m=0,_={};d?.forEach(e=>{let t=e.jira_issues,s=e.theme_key;if(_[s]||(_[s]=[]),_[s].push(t),t.resolution_date)l++,new Date(t.resolution_date)>=h&&m++;else{let e=t.status?.toLowerCase()||"";e.includes("progress")||e.includes("development")||e.includes("review")?p++:g++}});let f=new Set(Object.keys(_)),x=o.filter(e=>!f.has(e));return g+=x.length,n.Z.json({total_issues:a,fixed:l,in_progress:p,open:g,fix_rate_30d:m})}catch(e){return console.error("Error fetching issue progress:",e),n.Z.json({error:"Failed to fetch issue progress",details:e instanceof Error?e.message:"Unknown"},{status:500})}}let l=new i.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/accounts/[id]/issue-progress/route",pathname:"/api/accounts/[id]/issue-progress",filename:"route",bundlePath:"app/api/accounts/[id]/issue-progress/route"},resolvedPagePath:"/Users/mario/friction-intelligence/app/api/accounts/[id]/issue-progress/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:p,staticGenerationAsyncStorage:g,serverHooks:h,headerHooks:m,staticGenerationBailout:_}=l,f="/api/accounts/[id]/issue-progress/route";function x(){return(0,o.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:g})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[456,552,421],()=>s(82322));module.exports=r})();